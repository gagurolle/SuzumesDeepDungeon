
<div class="background">
  <div class="main-page-container">
    <!-- Герой-секция -->
    <section class="hero">
      <h1 class="page-title"><img src="https://cdn.7tv.app/emote/01F9V0VY58000AJG70JGM8SMF1/2x.avif" alt="0">Twitch Игры от пользователей<img src="https://cdn.7tv.app/emote/01HD92YYE8000DW97PFPF49BZG/1x.avif" alt="0"></h1>
      <p>Здесь представлен список игр, которые добавили через команды</p>
    </section>

    <!-- Таблица действий -->
    <section class="code-section">
      <h2 class="section-title">Actions Log</h2>
      
      <div class="table-container">
        <table class="actions-table">
          <thead>
            <tr>
              <th>#</th>
              <th>User</th>
              <th>Action</th>
              <th>Type</th>
              <th>Command/Reward</th>
              <th>Cost</th>
              <th>Data</th>
            </tr>
          </thead>
          <tbody>
            @for(action of actions; track action.id; let i = $index) {
            <tr>
              <td class="index">{{ i + 1 }}</td>
              <td class="user-info">
                <img [src]="action.user.profileImageUrl || 'https://static-cdn.jtvnw.net/user-default-pictures-uv/ce57700a-def9-11e9-842d-784f43822e80-profile_image-70x70.png'" 
                     alt="Profile" class="profile-image">
                <div class="user-details">
                  <span class="user-login">{{ action.user.userLogin }}</span>
                  <span class="user-type">{{ action.user.userType || 'Viewer' }}</span>
                </div>
              </td>
              <td class="action-name">{{ action.systemAction?.actionName || 'N/A' }}</td>
              <td class="action-type">
                <span class="type-badge" [class.reward]="action.rewardRedemption" [class.command]="action.commandTriggered">
                  {{ action.rewardRedemption ? 'Reward' : (action.commandTriggered ? 'Command' : 'Unknown') }}
                </span>
              </td>
              <td class="command-reward">
                {{ action.commandTriggered?.command || action.rewardRedemption?.rewardName || 'N/A' }}
              </td>
              <td class="cost">
                {{ action.rewardRedemption?.rewardCost}}
              </td>
              <td class="row-data">{{ action.rowData || 'No additional data' }}</td>
            </tr>
            } @empty {
            <tr>
              <td colspan="7" class="no-actions">No actions recorded yet</td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </section>

    <!-- Дополнительная информация -->
    <section class="after-code-section">
      <h2 class="section-title">About Actions Tracking</h2>
      <p class="section-title">This log shows all tracked events from your Twitch channel including reward redemptions, command usage, and other system actions.</p>
    </section>
  </div>
</div>

<div id="twitch-embed"></div>

<script src="https://embed.twitch.tv/embed/v1.js"></script>
<script>
  new Twitch.Embed("twitch-embed", {
    width: 300,
    height: 300,
    channel: "pan_suzume",
    layout: "video",
    autoplay: false
  });
</script>

<footer>
  <p>Twitch Actions Log &copy; 2025</p>
</footer>